<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Configurações de Autenticação</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container">
<h1>Configurações de Autenticação</h1>
<form>
  <!-- Senha Forte -->
  <div class="mb-3">
    <input type="checkbox" id="senha_forte" name="senha_forte"
        {% if data['senha_forte'] == 1 %} checked {% elif data['senha_forte'] == 2 %} disabled {% endif %}
        onchange="updateConfig('senha_forte', this)">
    <label for="senha_forte"> Usar uma senha forte</label><br>
    <label for="ignore1">Ignorar</label>
    <div class="form-check form-switch">
      <input class="form-check-input" type="checkbox" id="ignore1"
        {% if data['senha_forte'] == 2 %} checked {% endif %}
        onchange="toggleIgnore('senha_forte', this, 'senha_forte')">
    </div>
  </div>

  <!-- Não Reusar -->
<div class="container">
  <div class="row">
    <!-- Coluna da esquerda com o conteúdo da div -->
    <div class="col-md-4">
      <div class="mb-3">
        <input type="checkbox" id="nao_reusar" name="nao_reusar"
          {% if data['nao_reusar'] == 1 %} checked {% elif data['nao_reusar'] == 2 %} disabled {% endif %}
          onchange="updateConfig('nao_reusar', this)">
        <label for="nao_reusar"> Não reutilizar senhas</label><br>
        <label for="ignore2">Ignorar</label>
        <div class="form-check form-switch">
          <input class="form-check-input" type="checkbox" id="ignore2"
            {% if data['nao_reusar'] == 2 %} checked {% endif %}
            onchange="toggleIgnore('nao_reusar', this, 'nao_reusar')">
        </div>
      </div>
    </div>
    <!-- Segunda coluna -->
    <div class="col-md-4">
      <!-- Adicione o conteúdo para a segunda coluna aqui -->
      <p>Conteúdo da segunda coluna.</p>
    </div>
    <!-- Terceira coluna -->
    <div class="col-md-4">
      <!-- Adicione o conteúdo para a terceira coluna aqui -->
      <p>Conteúdo da terceira coluna.</p>
    </div>
  </div>
</div>

  <!-- Gerenciador de Senhas -->
  <div class="mb-3">
    <input type="checkbox" id="gerenciador_senha" name="gerenciador_senha"
        {% if data['gerenciador_senha'] == 1 %} checked {% elif data['gerenciador_senha'] == 2 %} disabled {% endif %}
        onchange="updateConfig('gerenciador_senha', this)">
    <label for="gerenciador_senha"> Utilizar gerenciador de senhas seguro</label><br>
    <label for="ignore3">Ignorar</label>
    <div class="form-check form-switch">
      <input class="form-check-input" type="checkbox" id="ignore3"
        {% if data['gerenciador_senha'] == 2 %} checked {% endif %}
        onchange="toggleIgnore('gerenciador_senha', this, 'gerenciador_senha')">
    </div>
  </div>
</form>

<script>
  function updateConfig(field, checkbox) {
    const value = checkbox.checked ? 1 : 0;
    fetch(`/update-config`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ field: field, value: value }),
    });
  }

function toggleIgnore(field, switchElement, checkboxId) {
    const checkbox = document.getElementById(checkboxId);
    const value = switchElement.checked ? 2 : 0;

    fetch(`/update-config`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ field: field, value: value }),
    }).then(() => {
      if (switchElement.checked) {
        checkbox.checked = false;  // Limpa o checkbox
        checkbox.disabled = true;  // Desabilita o checkbox
      } else {
        checkbox.disabled = false;  // Habilita o checkbox novamente se o switch for desmarcado
      }
    });
}

</script>

<!-- Incluindo o JavaScript do Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
